(function(e){function t(){var e=document.createElement("input"),t="onpaste";return e.setAttribute(t,""),"function"==typeof e[t]?"paste":"input"}var n,a=t()+".mask",r=navigator.userAgent,i=/iphone/i.test(r),o=/android/i.test(r);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,t){var n;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof e?(t="number"==typeof t?t:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&(n=this.createTextRange(),n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(n=document.selection.createRange(),e=0-n.duplicate().moveStart("character",-1e5),t=e+n.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(t,r){var c,l,s,u,f,h;return!t&&this.length>0?(c=e(this[0]),c.data(e.mask.dataName)()):(r=e.extend({placeholder:e.mask.placeholder,completed:null},r),l=e.mask.definitions,s=[],u=h=t.length,f=null,e.each(t.split(""),function(e,t){"?"==t?(h--,u=e):l[t]?(s.push(RegExp(l[t])),null===f&&(f=s.length-1)):s.push(null)}),this.trigger("unmask").each(function(){function c(e){for(;h>++e&&!s[e];);return e}function d(e){for(;--e>=0&&!s[e];);return e}function m(e,t){var n,a;if(!(0>e)){for(n=e,a=c(t);h>n;n++)if(s[n]){if(!(h>a&&s[n].test(R[a])))break;R[n]=R[a],R[a]=r.placeholder,a=c(a)}b(),x.caret(Math.max(f,e))}}function p(e){var t,n,a,i;for(t=e,n=r.placeholder;h>t;t++)if(s[t]){if(a=c(t),i=R[t],R[t]=n,!(h>a&&s[a].test(i)))break;n=i}}function g(e){var t,n,a,r=e.which;8===r||46===r||i&&127===r?(t=x.caret(),n=t.begin,a=t.end,0===a-n&&(n=46!==r?d(n):a=c(n-1),a=46===r?c(a):a),k(n,a),m(n,a-1),e.preventDefault()):27==r&&(x.val(S),x.caret(0,y()),e.preventDefault())}function v(t){var n,a,i,l=t.which,u=x.caret();t.ctrlKey||t.altKey||t.metaKey||32>l||l&&(0!==u.end-u.begin&&(k(u.begin,u.end),m(u.begin,u.end-1)),n=c(u.begin-1),h>n&&(a=String.fromCharCode(l),s[n].test(a)&&(p(n),R[n]=a,b(),i=c(n),o?setTimeout(e.proxy(e.fn.caret,x,i),0):x.caret(i),r.completed&&i>=h&&r.completed.call(x))),t.preventDefault())}function k(e,t){var n;for(n=e;t>n&&h>n;n++)s[n]&&(R[n]=r.placeholder)}function b(){x.val(R.join(""))}function y(e){var t,n,a=x.val(),i=-1;for(t=0,pos=0;h>t;t++)if(s[t]){for(R[t]=r.placeholder;pos++<a.length;)if(n=a.charAt(pos-1),s[t].test(n)){R[t]=n,i=t;break}if(pos>a.length)break}else R[t]===a.charAt(pos)&&t!==u&&(pos++,i=t);return e?b():u>i+1?(x.val(""),k(0,h)):(b(),x.val(x.val().substring(0,i+1))),u?t:f}var x=e(this),R=e.map(t.split(""),function(e){return"?"!=e?l[e]?r.placeholder:e:void 0}),S=x.val();x.data(e.mask.dataName,function(){return e.map(R,function(e,t){return s[t]&&e!=r.placeholder?e:null}).join("")}),x.attr("readonly")||x.one("unmask",function(){x.unbind(".mask").removeData(e.mask.dataName)}).bind("focus.mask",function(){clearTimeout(n);var e;S=x.val(),e=y(),n=setTimeout(function(){b(),e==t.length?x.caret(0,e):x.caret(e)},10)}).bind("blur.mask",function(){y(),x.val()!=S&&x.change()}).bind("keydown.mask",g).bind("keypress.mask",v).bind(a,function(){setTimeout(function(){var e=y(!0);x.caret(e),r.completed&&e==x.val().length&&r.completed.call(x)},0)}),y()}))}})})(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJtYXNrZWRpbnB1dC5taW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksdD1cIm9ucGFzdGVcIjtyZXR1cm4gZS5zZXRBdHRyaWJ1dGUodCxcIlwiKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBlW3RdP1wicGFzdGVcIjpcImlucHV0XCJ9dmFyIG4sYT10KCkrXCIubWFza1wiLHI9bmF2aWdhdG9yLnVzZXJBZ2VudCxpPS9pcGhvbmUvaS50ZXN0KHIpLG89L2FuZHJvaWQvaS50ZXN0KHIpO2UubWFzaz17ZGVmaW5pdGlvbnM6ezk6XCJbMC05XVwiLGE6XCJbQS1aYS16XVwiLFwiKlwiOlwiW0EtWmEtejAtOV1cIn0sZGF0YU5hbWU6XCJyYXdNYXNrRm5cIixwbGFjZWhvbGRlcjpcIl9cIn0sZS5mbi5leHRlbmQoe2NhcmV0OmZ1bmN0aW9uKGUsdCl7dmFyIG47aWYoMCE9PXRoaXMubGVuZ3RoJiYhdGhpcy5pcyhcIjpoaWRkZW5cIikpcmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIGU/KHQ9XCJudW1iZXJcIj09dHlwZW9mIHQ/dDplLHRoaXMuZWFjaChmdW5jdGlvbigpe3RoaXMuc2V0U2VsZWN0aW9uUmFuZ2U/dGhpcy5zZXRTZWxlY3Rpb25SYW5nZShlLHQpOnRoaXMuY3JlYXRlVGV4dFJhbmdlJiYobj10aGlzLmNyZWF0ZVRleHRSYW5nZSgpLG4uY29sbGFwc2UoITApLG4ubW92ZUVuZChcImNoYXJhY3RlclwiLHQpLG4ubW92ZVN0YXJ0KFwiY2hhcmFjdGVyXCIsZSksbi5zZWxlY3QoKSl9KSk6KHRoaXNbMF0uc2V0U2VsZWN0aW9uUmFuZ2U/KGU9dGhpc1swXS5zZWxlY3Rpb25TdGFydCx0PXRoaXNbMF0uc2VsZWN0aW9uRW5kKTpkb2N1bWVudC5zZWxlY3Rpb24mJmRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSYmKG49ZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCksZT0wLW4uZHVwbGljYXRlKCkubW92ZVN0YXJ0KFwiY2hhcmFjdGVyXCIsLTFlNSksdD1lK24udGV4dC5sZW5ndGgpLHtiZWdpbjplLGVuZDp0fSl9LHVubWFzazpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyaWdnZXIoXCJ1bm1hc2tcIil9LG1hc2s6ZnVuY3Rpb24odCxyKXt2YXIgYyxsLHMsdSxmLGg7cmV0dXJuIXQmJnRoaXMubGVuZ3RoPjA/KGM9ZSh0aGlzWzBdKSxjLmRhdGEoZS5tYXNrLmRhdGFOYW1lKSgpKToocj1lLmV4dGVuZCh7cGxhY2Vob2xkZXI6ZS5tYXNrLnBsYWNlaG9sZGVyLGNvbXBsZXRlZDpudWxsfSxyKSxsPWUubWFzay5kZWZpbml0aW9ucyxzPVtdLHU9aD10Lmxlbmd0aCxmPW51bGwsZS5lYWNoKHQuc3BsaXQoXCJcIiksZnVuY3Rpb24oZSx0KXtcIj9cIj09dD8oaC0tLHU9ZSk6bFt0XT8ocy5wdXNoKFJlZ0V4cChsW3RdKSksbnVsbD09PWYmJihmPXMubGVuZ3RoLTEpKTpzLnB1c2gobnVsbCl9KSx0aGlzLnRyaWdnZXIoXCJ1bm1hc2tcIikuZWFjaChmdW5jdGlvbigpe2Z1bmN0aW9uIGMoZSl7Zm9yKDtoPisrZSYmIXNbZV07KTtyZXR1cm4gZX1mdW5jdGlvbiBkKGUpe2Zvcig7LS1lPj0wJiYhc1tlXTspO3JldHVybiBlfWZ1bmN0aW9uIG0oZSx0KXt2YXIgbixhO2lmKCEoMD5lKSl7Zm9yKG49ZSxhPWModCk7aD5uO24rKylpZihzW25dKXtpZighKGg+YSYmc1tuXS50ZXN0KFJbYV0pKSlicmVhaztSW25dPVJbYV0sUlthXT1yLnBsYWNlaG9sZGVyLGE9YyhhKX1iKCkseC5jYXJldChNYXRoLm1heChmLGUpKX19ZnVuY3Rpb24gcChlKXt2YXIgdCxuLGEsaTtmb3IodD1lLG49ci5wbGFjZWhvbGRlcjtoPnQ7dCsrKWlmKHNbdF0pe2lmKGE9Yyh0KSxpPVJbdF0sUlt0XT1uLCEoaD5hJiZzW2FdLnRlc3QoaSkpKWJyZWFrO249aX19ZnVuY3Rpb24gZyhlKXt2YXIgdCxuLGEscj1lLndoaWNoOzg9PT1yfHw0Nj09PXJ8fGkmJjEyNz09PXI/KHQ9eC5jYXJldCgpLG49dC5iZWdpbixhPXQuZW5kLDA9PT1hLW4mJihuPTQ2IT09cj9kKG4pOmE9YyhuLTEpLGE9NDY9PT1yP2MoYSk6YSksayhuLGEpLG0obixhLTEpLGUucHJldmVudERlZmF1bHQoKSk6Mjc9PXImJih4LnZhbChTKSx4LmNhcmV0KDAseSgpKSxlLnByZXZlbnREZWZhdWx0KCkpfWZ1bmN0aW9uIHYodCl7dmFyIG4sYSxpLGw9dC53aGljaCx1PXguY2FyZXQoKTt0LmN0cmxLZXl8fHQuYWx0S2V5fHx0Lm1ldGFLZXl8fDMyPmx8fGwmJigwIT09dS5lbmQtdS5iZWdpbiYmKGsodS5iZWdpbix1LmVuZCksbSh1LmJlZ2luLHUuZW5kLTEpKSxuPWModS5iZWdpbi0xKSxoPm4mJihhPVN0cmluZy5mcm9tQ2hhckNvZGUobCksc1tuXS50ZXN0KGEpJiYocChuKSxSW25dPWEsYigpLGk9YyhuKSxvP3NldFRpbWVvdXQoZS5wcm94eShlLmZuLmNhcmV0LHgsaSksMCk6eC5jYXJldChpKSxyLmNvbXBsZXRlZCYmaT49aCYmci5jb21wbGV0ZWQuY2FsbCh4KSkpLHQucHJldmVudERlZmF1bHQoKSl9ZnVuY3Rpb24gayhlLHQpe3ZhciBuO2ZvcihuPWU7dD5uJiZoPm47bisrKXNbbl0mJihSW25dPXIucGxhY2Vob2xkZXIpfWZ1bmN0aW9uIGIoKXt4LnZhbChSLmpvaW4oXCJcIikpfWZ1bmN0aW9uIHkoZSl7dmFyIHQsbixhPXgudmFsKCksaT0tMTtmb3IodD0wLHBvcz0wO2g+dDt0KyspaWYoc1t0XSl7Zm9yKFJbdF09ci5wbGFjZWhvbGRlcjtwb3MrKzxhLmxlbmd0aDspaWYobj1hLmNoYXJBdChwb3MtMSksc1t0XS50ZXN0KG4pKXtSW3RdPW4saT10O2JyZWFrfWlmKHBvcz5hLmxlbmd0aClicmVha31lbHNlIFJbdF09PT1hLmNoYXJBdChwb3MpJiZ0IT09dSYmKHBvcysrLGk9dCk7cmV0dXJuIGU/YigpOnU+aSsxPyh4LnZhbChcIlwiKSxrKDAsaCkpOihiKCkseC52YWwoeC52YWwoKS5zdWJzdHJpbmcoMCxpKzEpKSksdT90OmZ9dmFyIHg9ZSh0aGlzKSxSPWUubWFwKHQuc3BsaXQoXCJcIiksZnVuY3Rpb24oZSl7cmV0dXJuXCI/XCIhPWU/bFtlXT9yLnBsYWNlaG9sZGVyOmU6dm9pZCAwfSksUz14LnZhbCgpO3guZGF0YShlLm1hc2suZGF0YU5hbWUsZnVuY3Rpb24oKXtyZXR1cm4gZS5tYXAoUixmdW5jdGlvbihlLHQpe3JldHVybiBzW3RdJiZlIT1yLnBsYWNlaG9sZGVyP2U6bnVsbH0pLmpvaW4oXCJcIil9KSx4LmF0dHIoXCJyZWFkb25seVwiKXx8eC5vbmUoXCJ1bm1hc2tcIixmdW5jdGlvbigpe3gudW5iaW5kKFwiLm1hc2tcIikucmVtb3ZlRGF0YShlLm1hc2suZGF0YU5hbWUpfSkuYmluZChcImZvY3VzLm1hc2tcIixmdW5jdGlvbigpe2NsZWFyVGltZW91dChuKTt2YXIgZTtTPXgudmFsKCksZT15KCksbj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YigpLGU9PXQubGVuZ3RoP3guY2FyZXQoMCxlKTp4LmNhcmV0KGUpfSwxMCl9KS5iaW5kKFwiYmx1ci5tYXNrXCIsZnVuY3Rpb24oKXt5KCkseC52YWwoKSE9UyYmeC5jaGFuZ2UoKX0pLmJpbmQoXCJrZXlkb3duLm1hc2tcIixnKS5iaW5kKFwia2V5cHJlc3MubWFza1wiLHYpLmJpbmQoYSxmdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgZT15KCEwKTt4LmNhcmV0KGUpLHIuY29tcGxldGVkJiZlPT14LnZhbCgpLmxlbmd0aCYmci5jb21wbGV0ZWQuY2FsbCh4KX0sMCl9KSx5KCl9KSl9fSl9KShqUXVlcnkpOyJdLCJmaWxlIjoibWFza2VkaW5wdXQubWluLmpzIn0=
